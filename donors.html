<!DOCTYPE html>
<html>

<head>
    <title>Paginated Table</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <div class="form-group">
            <label for="filterGender">Gender</label>
            <select id="filterGender" class="form-control" onchange="filterTable()">
                <option value="">All</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
            </select>
        </div>
        <div class="form-group">
            <label for="filterBloodGroup">Blood Group</label>
            <select id="filterBloodGroup" class="form-control" onchange="filterTable()">
                <option value="">All</option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
            </select>
        </div>
        <table class="table" id="myTable">
            <thead>
                <tr>
                    <th scope="col">State</th>
                    <th scope="col">City</th>
                    <th scope="col">Age</th>
                    <th scope="col">Gender</th>
                    <th scope="col">Blood Group</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be populated from the API -->
            </tbody>
        </table>
        <nav>
            <ul class="pagination" id="pagination">
                <!-- Pagination buttons will be added here -->
            </ul>
        </nav>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        var currentPage = 1;
        var rowsPerPage = 10;

        document.addEventListener('DOMContentLoaded', function () {
            fetch('https://dummyjson.com/users')
                .then(response => response.json())
                .then(data => {
                    // console.log(data["users"].length);
                    // Populate the table
                    data["users"].forEach(function (user, index) {
                        var row = document.createElement('tr');
                        row.appendChild(createCell(user.address.state));
                        row.appendChild(createCell(user.address.city));
                        row.appendChild(createCell(user.age));
                        row.appendChild(createCell(user.gender));
                        row.appendChild(createCell(user.bloodGroup));
                        document.getElementById('myTable').getElementsByTagName('tbody')[0].appendChild(row);
                    });

                    // Get the query string from the URL
                    var queryString = window.location.search.substring(1);

                    // Set the input field value and filter the table
                    if (queryString) {
                        document.getElementById('filterInput').value = queryString;
                        filterTable();
                    }

                    // Add pagination buttons
                    var numPages = Math.ceil(data["users"].length / rowsPerPage);
                    // console.log(numPages);
                    for (var i = 1; i <= numPages; i++) {
                        var li = document.createElement('li');
                        li.className = 'page-item';
                        var a = document.createElement('a');
                        a.className = 'page-link';
                        a.href = '#';
                        a.innerText = i;
                        a.addEventListener('click', function (e) {
                            e.preventDefault();
                            currentPage = parseInt(this.innerText);
                            showPage();
                        });
                        li.appendChild(a);
                        document.getElementById('pagination').appendChild(li);
                    }

                    // Show the first page
                    showPage();
                });

            function createCell(text) {
                var cell = document.createElement('td');
                cell.appendChild(document.createTextNode(text));
                return cell;
            }
        });

        function filterTable() {
            var filterGender = document.getElementById("filterGender").value.toUpperCase();
            var filterBloodGroup = document.getElementById("filterBloodGroup").value.toUpperCase();
            var table = document.getElementById("myTable");
            var tr = table.getElementsByTagName("tr");
            for (var i = 0; i < tr.length; i++) {
                var tdGender = tr[i].getElementsByTagName("td")[3];
                var tdBloodGroup = tr[i].getElementsByTagName("td")[4];
                if (tdGender && tdBloodGroup) {
                    var txtValueGender = tdGender.textContent || tdGender.innerText;
                    var txtValueBloodGroup = tdBloodGroup.textContent || tdBloodGroup.innerText;
                    if ((filterGender === "" || txtValueGender.toUpperCase() === filterGender) &&
                        (filterBloodGroup === "" || txtValueBloodGroup.toUpperCase().indexOf(filterBloodGroup) > -1)) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }



        function showPage() {
            var table = document.getElementById('myTable');
            var rows = table.getElementsByTagName('tr');
            for (var i = 1; i < rows.length; i++) {
                if (i <= rowsPerPage * (currentPage - 1) || i > rowsPerPage * currentPage) {
                    rows[i].style.display = 'none';
                } else {
                    rows[i].style.display = '';
                }
            }
        }

    </script>
</body>

</html>